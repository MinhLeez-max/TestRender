{% extends 'base.html' %}

{% block title %}Đăng ký | Đặt vé xe {% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <div class="card shadow-sm">
                <div class="card-body p-4">
                    <h4 class="card-title text-center mb-4">Đăng ký tài khoản</h4>
                    
                    <form method="post">
                        {% csrf_token %}
                        
                        {% if form.non_field_errors %}
                            <div class="alert alert-danger">
                                {% for error in form.non_field_errors %}
                                    <p class="mb-0">{{ error }}</p>
                                {% endfor %}
                            </div>
                        {% endif %}
                        
                        <div class="mb-3">
                            <label for="{{ form.username.id_for_label }}" class="form-label">Tên đăng nhập</label>
                            {{ form.username }}
                            {% if form.username.errors %}
                                <div class="text-danger small mt-1">
                                    {% for error in form.username.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </div>
                            {% else %}
                                <div class="form-text text-muted small">
                                    Tên đăng nhập chỉ được chứa chữ cái, số và ký tự đặc biệt: @, ., +, -, _.
                                </div>
                            {% endif %}
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="{{ form.first_name.id_for_label }}" class="form-label">Họ</label>
                                {{ form.first_name }}
                                {% if form.first_name.errors %}
                                    <div class="text-danger small mt-1">
                                        {% for error in form.first_name.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="{{ form.last_name.id_for_label }}" class="form-label">Tên</label>
                                {{ form.last_name }}
                                {% if form.last_name.errors %}
                                    <div class="text-danger small mt-1">
                                        {% for error in form.last_name.errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="{{ form.email.id_for_label }}" class="form-label">Email</label>
                            {{ form.email }}
                            {% if form.email.errors %}
                                <div class="text-danger small mt-1">
                                    {% for error in form.email.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </div>
                            {% else %}
                                <div class="form-text text-muted small">
                                    Chúng tôi sẽ không chia sẻ email của bạn với bất kỳ ai.
                                </div>
                            {% endif %}
                        </div>
                        
                        <div class="mb-3">
                            <label for="{{ form.password1.id_for_label }}" class="form-label">Mật khẩu</label>
                            {{ form.password1 }}
                            {% if form.password1.errors %}
                                <div class="text-danger small mt-1">
                                    {% for error in form.password1.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </div>
                            {% else %}
                                <div class="form-text text-muted small">
                                    <ul class="mb-0 ps-3">
                                        <li>Mật khẩu của bạn phải chứa ít nhất 8 ký tự.</li>
                                        <li>Mật khẩu không được quá phổ biến.</li>
                                        <li>Mật khẩu không được chứa toàn số.</li>
                                    </ul>
                                </div>
                            {% endif %}
                        </div>
                        
                        <div class="mb-4">
                            <label for="{{ form.password2.id_for_label }}" class="form-label">Xác nhận mật khẩu</label>
                            {{ form.password2 }}
                            {% if form.password2.errors %}
                                <div class="text-danger small mt-1">
                                    {% for error in form.password2.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>
                        
                        <div class="mb-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="agreeTerms" required>
                                <label class="form-check-label" for="agreeTerms">
                                    Tôi đồng ý với <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">Điều khoản dịch vụ</a> và <a href="#" data-bs-toggle="modal" data-bs-target="#privacyModal">Chính sách bảo mật</a>
                                </label>
                            </div>
                        </div>
                        
                        <div class="d-grid mb-3">
                            <button type="submit" class="btn btn-primary py-2">
                                <i class="fas fa-user-plus me-2"></i>
                                Đăng ký
                            </button>
                        </div>
                    </form>
                </div>
                
                <div class="card-footer bg-light text-center py-3">
                    <p class="mb-0">Đã có tài khoản? <a href="{% url 'login' %}" class="text-decoration-none">Đăng nhập</a></p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Terms Modal -->
    <div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="termsModalLabel">Điều khoản dịch vụ</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h6>1. Chấp nhận điều khoản</h6>
                    <p>Bằng cách truy cập và sử dụng dịch vụ của Đặt vé xe , bạn đồng ý tuân thủ và chịu ràng buộc bởi các điều khoản và điều kiện được nêu trong thỏa thuận này.</p>
                    
                    <h6>2. Quy định sử dụng dịch vụ</h6>
                    <p>Người dùng phải cung cấp thông tin chính xác khi đăng ký tài khoản và đặt vé. Chúng tôi có quyền từ chối hoặc hủy bỏ dịch vụ nếu phát hiện gian lận hoặc vi phạm điều khoản.</p>
                    
                    <h6>3. Trách nhiệm của người dùng</h6>
                    <p>Người dùng chịu trách nhiệm bảo mật thông tin tài khoản của mình. Mọi hoạt động diễn ra dưới tài khoản của bạn đều thuộc trách nhiệm của bạn.</p>
                    
                    <h6>4. Thanh toán và hoàn tiền</h6>
                    <p>Chúng tôi chỉ là nền tảng kết nối giữa khách hàng và nhà xe. Chính sách hoàn tiền và hủy vé tuân theo quy định của từng nhà xe.</p>
                    
                    <h6>5. Thay đổi điều khoản</h6>
                    <p>Chúng tôi có quyền thay đổi điều khoản dịch vụ bất cứ lúc nào. Việc tiếp tục sử dụng dịch vụ sau khi thay đổi đồng nghĩa với việc bạn chấp nhận những thay đổi đó.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Đồng ý</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Privacy Modal -->
    <div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="privacyModalLabel">Chính sách bảo mật</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h6>1. Thông tin chúng tôi thu thập</h6>
                    <p>Chúng tôi thu thập thông tin cá nhân như tên, email, số điện thoại và thông tin thanh toán khi bạn đăng ký và sử dụng dịch vụ của chúng tôi.</p>
                    
                    <h6>2. Cách chúng tôi sử dụng thông tin</h6>
                    <p>Thông tin của bạn được sử dụng để cung cấp dịch vụ đặt vé, gửi thông báo về chuyến đi, hỗ trợ khách hàng và cải thiện dịch vụ của chúng tôi.</p>
                    
                    <h6>3. Bảo mật thông tin</h6>
                    <p>Chúng tôi cam kết bảo vệ thông tin cá nhân của bạn bằng các biện pháp bảo mật hợp lý về mặt kỹ thuật và tổ chức.</p>
                    
                    <h6>4. Chia sẻ thông tin</h6>
                    <p>Chúng tôi chỉ chia sẻ thông tin của bạn với nhà xe khi cần thiết để hoàn tất việc đặt vé. Chúng tôi không bán hoặc cho thuê thông tin cá nhân của bạn cho bên thứ ba.</p>
                    
                    <h6>5. Quyền của bạn</h6>
                    <p>Bạn có quyền truy cập, sửa đổi hoặc xóa thông tin cá nhân của mình. Vui lòng liên hệ với chúng tôi nếu bạn muốn thực hiện các quyền này.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Đồng ý</button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
